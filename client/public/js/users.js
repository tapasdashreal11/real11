"use strict";function validateEmail(e){var n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(e)}function validatePhone(e){var n=new RegExp(/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im);return n.test(e)}$(document).ready(function(){$("#email").on("keyup",function(){$("#error-email").html("")}),$("#phone").on("keyup",function(){$("#error-phone").html("")}),$("#form-registration").submit(function(e){var n=$.trim($("#email").val()),t=$.trim($("#phone").val()),o=!1;n||t||(o=!0,$("#email").focus()),n&&(validateEmail(n)||(o=!0,$("#error-email").html("Invalid email address"))),t&&(validatePhone(t)||(o=!0,$("#error-phone").html("Invalid phone number"))),o&&e.preventDefault()}),$("#code-confirm").on("keyup",function(){$("#alert-valid-code").hide().find("p").html("");var e=$(this).val();e&&4===e.length?$("#btn-confirm").prop("disabled",!1):$("#btn-confirm").prop("disabled",!0)}),$("#btn-confirm").on("click",function(){var e=$("#phone-register").val(),n=$("#id-register").val(),t=$("#code-confirm").val(),o=$("#link-reset").val();$("#btn-confirm").prop("disabled",!0),t&&4===t.length?$.ajax({url:"/users/confirm/code",method:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({code:t,phone:e,userId:n}),success:function(e){e&&e.success&&e.link?o?window.location.href=o:window.location.href=e.link:$("#alert-valid-code").show().find("p").html(e.message||"Code not corret!"),$("#btn-confirm").prop("disabled",!1)},error:function(e){console.error(e)}}):($("#btn-confirm").prop("disabled",!1),$("#alert-valid-code").show().find("p").html("Code not exists"))}),$("#btn-send-to").on("click",function(){$("#btn-send-to").html('<i class="fa fa-spinner fa-spin fa-fw"></i>'),$("#btn-send-to").prop("disabled",!0);var e=!!$("#link-reset").val()||"",n=$("#phone-register").val();n&&$.ajax({url:"/users/confirm/reset",method:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({phone:n,registration:e}),success:function(e){e&&e.success?toastr.success(e.message):toastr.error(e.message||"We cannot send sms to phone number "+n),$("#btn-send-to").html("send again"),$("#btn-send-to").prop("disabled",!1)},error:function(e){console.error(e),$("#btn-send-to").html("send again"),$("#btn-send-to").prop("disabled",!1),toastr.error("We couldn't send to the server!")}})})});
//# sourceMappingURL=users.js.map
