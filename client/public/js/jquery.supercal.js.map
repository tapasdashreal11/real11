{"version":3,"sources":["jquery.supercal.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","factory","define","amd","jQuery","$","defaults","todayButton","showInput","weekStart","widget","cellRatio","format","footer","dayHeader","mode","animDuration","transition","tableClasses","hidden","setOnMonthChange","condensed","now","Date","months","shortMonths","shortDays","daysInMonth","delta","undefined","this","getFullYear","getMonth","getDate","isDay","day","isValid","Object","toString","call","isNaN","getTime","fn","supercal","method","pMethods","drawCalendar","selectedDate","replace","options","data","empty","drawHeader","appendTo","month","drawMonth","addClass","html","drawFooter","drawPopupCalendar","container","calendar","parent","length","find","width","outerWidth","wrap","after","hide","date","header","monthNames","append","monthStart","days","rows","table","numPrevDays","getDay","numCurrentDays","numNextDays","daysInLastMonth","tableHeader","i","text","push","displayNumber","classes","slice","row","tr","col","cell","attr","formatDate","prop","val","parseInt","substr","methods","init","settings","extend","document","on","e","preventDefault","stopPropagation","changeMonth","apply","closest","hasClass","removeClass","replaceWith","show","not","target","thisDate","originalElement","formattedDate","trigger","children","each","is","element","newDay","newDate","direction","newCalendar","currentDate","calWidth","calHeight","outerHeight","height","Math","min","stop","fadeOut","fadeIn","animate","opacity","css","position","top","left","promise","done","remove","prev","next","Array","arguments"],"mappings":"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","file":"jquery.supercal.js","sourcesContent":["/**\r\n * Supercal 0.1.1\r\n * jQuery calendar widget/large view plugin with Bootstrap compatibility\r\n *\r\n * James Waples 2013\r\n *\r\n * https://github.com/jamwaffles/SuperCal\r\n **/\r\n\r\n(function(factory) {\r\n\tif(typeof define === 'function' && define.amd) {\r\n\t\tdefine(['jquery'], factory);\r\n\t} else {\r\n\t\tfactory(jQuery);\r\n\t}\r\n}(function($) {\r\n\tvar defaults = {\r\n\t\ttodayButton: true,\t\t// Show the button to reset to today's date?\r\n\t\tshowInput: true,\t\t// Show input\r\n\t\tweekStart: 1,\t\t\t// Start day of the week. 0 is Sunday, 6 for Saturday, 1 for Monday (default)\r\n\t\twidget: true,\r\n\t\tcellRatio: 1,\r\n\t\tformat: 'd/m/y',\r\n\t\tfooter: true,\r\n\t\tdayHeader: true,\r\n\t\tmode: 'widget',\t\t\t// 'widget' (default), 'tiny', 'popup', 'page'\r\n\t\tanimDuration: 200,\r\n\t\ttransition: '',\r\n\t\ttableClasses: 'table table-condensed',\r\n\t\thidden: true,\r\n\t\tsetOnMonthChange: true,\r\n\t\tcondensed: false\r\n\t};\r\n\t\r\n\tvar now = new Date();\r\n\r\n\tvar months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\r\n\tvar shortMonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n\tvar days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n\tvar shortDays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n\r\n\t// Get the number of days in the current month (or next month if delta == 1, or prev month if delta == -1, etc)\r\n\tDate.prototype.daysInMonth = function(delta) {\r\n\t\tdelta = delta === undefined ? 0 : delta;\r\n\r\n\t\treturn new Date(this.getFullYear(), this.getMonth() + 1 + delta, 0).getDate();\r\n\t}\r\n\r\n\t// Is this date today? Can also test against another date when specifying `now`\r\n\tDate.prototype.isDay = function(day) {\r\n\t\tif(day === undefined) {\r\n\t\t\tday = new Date();\r\n\t\t}\r\n\r\n\t\treturn this.getFullYear() == day.getFullYear() \r\n\t\t\t&& this.getMonth() == day.getMonth() \r\n\t\t\t&& this.getDate() == day.getDate();\r\n\t}\r\n\r\n\tDate.prototype.isValid = function() {\r\n\t\treturn Object.prototype.toString.call(this) === \"[object Date]\" && !isNaN(this.getTime());\r\n\t}\r\n\r\n\t$.fn.supercal = function(method) {\r\n\t\t// Private methods\r\n\t\tvar pMethods = {\r\n\t\t\tdrawCalendar: function(selectedDate, replace) {\r\n\t\t\t\tvar options = $(this).data('options');\r\n\r\n\t\t\t\tselectedDate = selectedDate || now;\r\n\r\n\t\t\t\tif(replace !== undefined && replace == true) {\r\n\t\t\t\t\tthis.empty();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpMethods.drawHeader(selectedDate, options).appendTo(this);\r\n\r\n\t\t\t\tvar month = pMethods\r\n\t\t\t\t\t.drawMonth(selectedDate, options)\r\n\t\t\t\t\t.addClass('current');\r\n\r\n\t\t\t\t$('<div />')\r\n\t\t\t\t\t.addClass('supercal-month')\r\n\t\t\t\t\t.html(month)\r\n\t\t\t\t\t.appendTo(this);\r\n\r\n\t\t\t\tpMethods.drawFooter(selectedDate, options).appendTo(this);\r\n\r\n\t\t\t\t$(this).data('supercal', true);\r\n\t\t\t\t$(this).data('date', selectedDate);\r\n\t\t\t\t$(this).data('element', this);\r\n\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\tdrawPopupCalendar: function(selectedDate, replace) {\r\n\t\t\t\tvar options = $(this).data('options');\r\n\r\n\t\t\t\tselectedDate = selectedDate || now;\r\n\r\n\t\t\t\tvar container, calendar;\r\n\r\n\t\t\t\tif($(this).parent('.supercal-popup-wrapper').length) {\r\n\t\t\t\t\tcontainer = $(this).parent();\r\n\t\t\t\t\tcalendar = $(this).parent().find('.supercal-popup');\r\n\t\t\t\t\tcalendar.empty();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer = $('<div />').addClass('supercal-popup-wrapper');\r\n\t\t\t\t\tcalendar = $('<div />')\r\n\t\t\t\t\t\t.addClass('supercal supercal-popup')\r\n\t\t\t\t\t\t.width($(this).outerWidth(true));\r\n\r\n\t\t\t\t\t$(this).wrap(container);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(this).after(calendar);\r\n\r\n\t\t\t\tif(options.hidden) {\r\n\t\t\t\t\tcalendar.hide();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpMethods.drawHeader(selectedDate, options).appendTo(calendar);\r\n\r\n\t\t\t\tvar month = pMethods\r\n\t\t\t\t\t.drawMonth(selectedDate, options)\r\n\t\t\t\t\t.addClass('current');\r\n\r\n\t\t\t\t$('<div />')\r\n\t\t\t\t\t.addClass('supercal-month')\r\n\t\t\t\t\t.html(month)\r\n\t\t\t\t\t.appendTo(calendar);\r\n\r\n\t\t\t\tcalendar.data('supercal', true);\r\n\t\t\t\tcalendar.data('date', selectedDate);\r\n\t\t\t\tcalendar.data('element', this);\r\n\t\t\t\tcalendar.data('options', options);\r\n\r\n\t\t\t\t$(this).parent().wrap($('<div />').addClass('supercal-affix'));\r\n\t\t\t\t\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\tdrawHeader: function(date, options) {\r\n\t\t\t\tvar header = $('<div />').addClass('supercal-header');\r\n\t\t\t\tvar monthNames = options.shortMonths ? shortMonths : months;\r\n\r\n\t\t\t\t$('<button />')\r\n\t\t\t\t\t.addClass('prev-month change-month btn')\r\n\t\t\t\t\t.html('&laquo;')\r\n\t\t\t\t\t.appendTo(header);\r\n\r\n\t\t\t\t$('<button />')\r\n\t\t\t\t\t.addClass('next-month change-month btn')\r\n\t\t\t\t\t.html('&raquo;')\r\n\t\t\t\t\t.appendTo(header);\r\n\r\n\t\t\t\t$('<span />')\r\n\t\t\t\t\t.addClass('month')\r\n\t\t\t\t\t.append('<div>' + monthNames[date.getMonth()] + ' ' + date.getFullYear() + '</div>')\r\n\t\t\t\t\t.appendTo(header);\r\n\r\n\t\t\t\treturn header;\r\n\t\t\t},\r\n\t\t\tdrawMonth: function(date, options) {\r\n\t\t\t\tdate = date || now;\r\n\t\t\t\tvar monthStart = new Date(date.getFullYear(), date.getMonth(), 1, 0, 0, 0);\r\n\t\t\t\tvar days = [];\r\n\t\t\t\tvar rows = [];\r\n\t\t\t\tvar table = $('<table />').addClass(options.tableClasses);\r\n\r\n\t\t\t\tvar numPrevDays = monthStart.getDay() - options.weekStart;\r\n\t\t\t\tvar numCurrentDays = date.daysInMonth();\r\n\t\t\t\tvar numNextDays = 42 - numPrevDays - numCurrentDays;\r\n\r\n\t\t\t\tvar daysInLastMonth = date.daysInMonth(-1);\r\n\r\n\t\t\t\t// Header\r\n\t\t\t\tif(options.dayHeader) {\r\n\t\t\t\t\tvar tableHeader = $('<tr />');\r\n\r\n\t\t\t\t\tfor(var i = 0; i <= 6; i++) {\r\n\t\t\t\t\t\tvar day = i + options.weekStart;\r\n\r\n\t\t\t\t\t\tif(day > 6) {\r\n\t\t\t\t\t\t\tday = i - 6;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$('<th />')\r\n\t\t\t\t\t\t\t.text(shortDays[day])\r\n\t\t\t\t\t\t\t.appendTo(tableHeader);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttable.append(tableHeader);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Add previous month's days\r\n\t\t\t\tfor(var i = 1; i <= numPrevDays; i++) {\r\n\t\t\t\t\tvar day = (daysInLastMonth - numPrevDays) + i;\r\n\r\n\t\t\t\t\tdays.push({\r\n\t\t\t\t\t\tdate: new Date(date.getFullYear(), date.getMonth() - 1, day, 0, 0, 0),\r\n\t\t\t\t\t\tdisplayNumber: day,\r\n\t\t\t\t\t\tclasses: 'month-prev'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Add current month's days\r\n\t\t\t\tfor(var i = 1; i <= numCurrentDays; i++) {\r\n\t\t\t\t\tvar day = {\r\n\t\t\t\t\t\tdate: new Date(date.getFullYear(), date.getMonth(), i, 0, 0, 0),\r\n\t\t\t\t\t\tdisplayNumber: i,\r\n\t\t\t\t\t\tclasses: ''\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// If this date is today's date, add the `today` class\r\n\t\t\t\t\tday.classes = day.date.isDay() ? 'today' : '';\r\n\r\n\t\t\t\t\t// If this date is the one selected, add the `selected` class\r\n\t\t\t\t\tday.classes += day.date.isDay(date) ? ' selected' : '';\r\n\r\n\t\t\t\t\tdays.push(day);\t\t// Add date to array\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Add next month's days\r\n\t\t\t\tfor(var i = 1; i <= numNextDays; i++) {\r\n\t\t\t\t\tdays.push({\r\n\t\t\t\t\t\tdate: new Date(date.getFullYear(), date.getMonth() + 1, i, 0, 0, 0),\r\n\t\t\t\t\t\tdisplayNumber: i,\r\n\t\t\t\t\t\tclasses: 'month-next'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Slice array into 7s\r\n\t\t\t\trows = [\r\n\t\t\t\t\tdays.slice(0, 7),\r\n\t\t\t\t\tdays.slice(7, 14),\r\n\t\t\t\t\tdays.slice(14, 21),\r\n\t\t\t\t\tdays.slice(21, 28),\r\n\t\t\t\t\tdays.slice(28, 35),\r\n\t\t\t\t\tdays.slice(35)\r\n\t\t\t\t];\r\n\r\n\t\t\t\t// Append arrays to table\r\n\t\t\t\tfor(var row = 0; row < 6; row++) {\r\n\t\t\t\t\tvar tr = $('<tr />');\r\n\r\n\t\t\t\t\tfor(var col = 0; col < 7; col++) {\r\n\t\t\t\t\t\tvar cell = rows[row][col];\r\n\r\n\t\t\t\t\t\t$('<td />')\r\n\t\t\t\t\t\t\t.data('date', cell.date)\r\n\t\t\t\t\t\t\t.text(cell.displayNumber)\r\n\t\t\t\t\t\t\t.addClass(cell.classes)\r\n\t\t\t\t\t\t\t.appendTo(tr);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttr.appendTo(table);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn table;\r\n\t\t\t},\r\n\t\t\tdrawFooter: function(date, options) {\r\n\t\t\t\tvar footer = $('<div />').addClass('supercal-footer input-prepend');\r\n\r\n\t\t\t\tif(options.footer == false) {\r\n\t\t\t\t\tfooter.hide();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(options.todayButton) {\r\n\t\t\t\t\t$('<button />')\r\n\t\t\t\t\t\t.text('Today')\r\n\t\t\t\t\t\t.addClass('btn supercal-today')\r\n\t\t\t\t\t\t.attr('type', 'button')\r\n\t\t\t\t\t\t.appendTo(footer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(options.showInput) {\r\n\t\t\t\t\t$('<span />')\r\n\t\t\t\t\t\t.text(pMethods.formatDate(date, options))\r\n\t\t\t\t\t\t.addClass('supercal-input uneditable-input span2')\r\n\t\t\t\t\t\t.appendTo(footer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$('<input />')\r\n\t\t\t\t\t.prop('type', 'hidden')\r\n\t\t\t\t\t.val(parseInt(date.getTime() / 1000), 10)\r\n\t\t\t\t\t.appendTo(footer);\r\n\r\n\t\t\t\treturn footer;\r\n\t\t\t},\r\n\t\t\t// Split out into helper object\r\n\t\t\tformatDate: function(date, options) {\t\t// Verrrry primitive date format function. Does what it needs to do...\r\n\t\t\t\treturn options.format\r\n\t\t\t\t\t.replace('d', ('0' + date.getDate()).substr(-2))\r\n\t\t\t\t\t.replace('m', ('0' + (date.getMonth() + 1)).substr(-2))\r\n\t\t\t\t\t.replace('y', date.getFullYear().toString().substr(-2))\r\n\t\t\t\t\t.replace('Y', date.getFullYear());\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar methods = {\r\n\t\t\tinit: function(settings) {\r\n\t\t\t\tvar options = $.extend({}, defaults, settings);\r\n\r\n\t\t\t\t// Events\r\n\t\t\t\tif(!$(document).data('supercal-events')) {\r\n\t\t\t\t\t$(document).on('click.supercal', '.supercal .change-month', function(e) {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\r\n\t\t\t\t\t\t\tmethods.changeMonth.apply($(this).closest('.supercal'), [ $(this).hasClass('next-month') ? 1 : -1, $(this).closest('.supercal').data('options') ]);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('click.supercal', '.supercal-today', function() {\r\n\t\t\t\t\t\t\tmethods.changeMonth.apply($(this).closest('.supercal'), [ now, $(this).closest('.supercal').data('options') ]);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('click.supercal', '.supercal table.current td', function() {\r\n\t\t\t\t\t\t\tvar container = $(this).closest('.supercal');\r\n\t\t\t\t\t\t\tvar table = $(this).closest('table');\r\n\r\n\t\t\t\t\t\t\ttable.find('.selected').removeClass('selected');\r\n\r\n\t\t\t\t\t\t\t$(this).addClass('selected');\r\n\r\n\t\t\t\t\t\t\tcontainer.find('.supercal-footer').replaceWith(pMethods.drawFooter($(this).data('date'), $(this).closest('.supercal').data('options')));\r\n\t\t\t\t\t\t\tcontainer.data('date', $(this).data('date'));\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// Popups\r\n\t\t\t\t\t\t.on('click.supercal', '.supercal-popup-trigger', function(e) {\r\n\t\t\t\t\t\t\t$(this).parent('.supercal-popup-wrapper').addClass('supercal-open').find('.supercal-popup').show();\r\n\r\n\t\t\t\t\t\t\t// Close other calendars\r\n\t\t\t\t\t\t\t$('.supercal-popup-wrapper.supercal-open').not($(this).parent()).removeClass('supercal-open').find('.supercal-popup').hide();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('click.supercal', function(e) {\r\n\t\t\t\t\t\t\tvar target = $(e.target);\r\n\r\n\t\t\t\t\t\t\tif(!target.closest('.supercal-popup-wrapper').length) {\r\n\t\t\t\t\t\t\t\t$('.supercal-popup-wrapper.supercal-open').removeClass('supercal-open').find('.supercal-popup').hide();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.on('click.supercal', '.supercal td', function() {\r\n\t\t\t\t\t\t\tvar thisDate = $(this).data('date');\r\n\t\t\t\t\t\t\tvar originalElement = $(this).closest('.supercal').data('element');\r\n\t\t\t\t\t\t\tvar formattedDate = pMethods.formatDate($(this).data('date'), $(this).closest('.supercal').data('options'));\r\n\r\n\t\t\t\t\t\t\t$(originalElement).trigger('dateselect', [ thisDate ]);\r\n\r\n\t\t\t\t\t\t\t// Set date on input element if it exists\r\n\t\t\t\t\t\t\t$(originalElement).children('.supercal-popup-trigger').val(formattedDate).trigger('change');\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$(document).data('supercal-events', true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn this.each(function() {\r\n\t\t\t\t\tif($(this).is(':input')) {\r\n\t\t\t\t\t\tvar element = $('<div />');\r\n\r\n\t\t\t\t\t\t$(this).addClass('supercal-target').after(element);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar element = this;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$(element).addClass('supercal ' + options.transition);\r\n\t\t\t\t\t$(element).data('options', options);\r\n\r\n\t\t\t\t\tif(options.transition) {\r\n\t\t\t\t\t\t$(element).addClass('transition');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(options.condensed) {\r\n\t\t\t\t\t\t$(element).addClass('condensed');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tswitch(options.mode) {\r\n\t\t\t\t\t\tcase 'popup':\r\n\t\t\t\t\t\t\t$(element).addClass('supercal-popup-trigger');\r\n\r\n\t\t\t\t\t\t\tpMethods.drawPopupCalendar.apply(element, options.date);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'widget':\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tpMethods.drawCalendar.call(element, options.date);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tchangeMonth: function(month, options) {\r\n\t\t\t\tvar newDay, newDate, direction, newCalendar;\r\n\r\n\t\t\t\tvar container = $(this);\r\n\t\t\t\tvar calendar = $(this).find('table');\r\n\r\n\t\t\t\tvar currentDate = container.data('date');\r\n\t\t\t\tvar calWidth = calendar.outerWidth(true);\r\n\t\t\t\tvar calHeight = calendar.outerHeight(true);\r\n\r\n\t\t\t\tcalendar.parent().height(calHeight);\t\t// Set height of calendar's container to height of table\r\n\r\n\t\t\t\tif(typeof month === 'number') {\r\n\t\t\t\t\tdirection = month > 0 ? 1 : -1;\r\n\t\t\t\t\tnewDay = Math.min(currentDate.daysInMonth(month), currentDate.getDate());\t\t// 31st of March clamped to 28th Feb, for example\r\n\t\t\t\t\tnewDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + direction, newDay);\r\n\t\t\t\t} else if(month instanceof Date) {\r\n\t\t\t\t\tdirection = (month > currentDate) ? 1 : -1;\r\n\t\t\t\t\tnewDate = now;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcalendar.stop(true, true);\r\n\t\t\t\tcontainer.data('date', newDate);\r\n\t\t\t\tnewCalendar = pMethods.drawMonth(newDate, options).addClass('current');\r\n\r\n\t\t\t\tswitch(options.transition) {\r\n\t\t\t\t\tcase 'fade':\r\n\t\t\t\t\t\tcalendar.fadeOut(options.animDuration, function() {\r\n\t\t\t\t\t\t\t$(this).replaceWith(newCalendar.hide().fadeIn(options.animDuration));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'crossfade':\t\t// Crossfade\r\n\t\t\t\t\t\tcalendar.removeClass('current').after(newCalendar);\r\n\t\t\t\t\t\tcalendar.animate({ opacity: 0 }, options.animDuration);\r\n\r\n\t\t\t\t\t\tnewCalendar.css({ opacity: 0, position: 'absolute', top: 0 }).animate({ opacity: 1 }, options.animDuration);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'carousel-horizontal':\r\n\t\t\t\t\t\tcalendar.css({ position: 'absolute' }).animate({ left: -(calWidth * direction) }).after(newCalendar);\r\n\r\n\t\t\t\t\t\tnewCalendar.css({ left: direction * calWidth, position: 'absolute' }).animate({ left: 0 });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'carousel-vertical':\t\t// Vertical slide\r\n\t\t\t\t\t\tcalendar.css({ position: 'absolute' }).animate({ top: -(calHeight * direction) }).after(newCalendar);\r\n\r\n\t\t\t\t\t\tnewCalendar.css({ top: direction * calHeight, position: 'absolute' }).animate({ top: 0 });\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\t\t// No transition - default\r\n\t\t\t\t\t\tcalendar.replaceWith(newCalendar);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Remove old calendar\r\n\t\t\t\tnewCalendar.promise().done(function() {\r\n\t\t\t\t\tcontainer.find('table').not(newCalendar).remove();\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Update header and footer\r\n\t\t\t\tcontainer.find('.supercal-header').replaceWith(pMethods.drawHeader(newDate, options));\r\n\t\t\t\tcontainer.find('.supercal-footer').replaceWith(pMethods.drawFooter(newDate, options));\r\n\r\n\t\t\t\t// Set date on input element if it exists\r\n\t\t\t\tif(options.setOnMonthChange) {\r\n\t\t\t\t\tcontainer.prev('.supercal-target').val($(this).data('date')).trigger('change');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdate: function() {\t\t// Return current selected date\r\n\t\t\t\tif($(this).next('.supercal').length) {\r\n\t\t\t\t\treturn $(this).next('.supercal').data('date');\r\n\t\t\t\t} else if($(this).data('supercal')) {\r\n\t\t\t\t\treturn $(this).data('date');\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif(methods[method]) {\r\n\t\t\treturn methods[method].apply(this, Array.prototype.slice.call(arguments, 1));\r\n\t\t} else if(typeof method === 'object' || !method) {\r\n\t\t\treturn methods.init.apply(this, arguments);\r\n\t\t}\r\n\t};\r\n}));\r\n"]}