"use strict";!function(t){function a(a,r){t('.raterater-input[data-id="'+a+'"]').data("input").val(r).change()}function r(a){m.each(function(){var r=t(this);if(l.mode==p&&("INPUT"==r.prop("tagName")||"SELECT"==r.prop("tagName"))){var e="input-"+w++,n=t('<div class="raterater-input"></div>').attr("data-id",e).attr("data-rating",r.val()).data("input",r);r.attr("data-id",e).attr("data-id",e).attr("data-rating",r.val()).data("input",r).after(n).hide(),h=r=n}h=r,r.data("star-width",a.starWidth),r.data("space-width",a.spaceWidth);var s=c(r);if(!s)throw"Error: Each raterater element needs a unique data-id attribute.";f[s]={state:"inactive",stars:null},"static"===r.css("position")&&r.css("position","relative"),r.addClass("raterater-wrapper"),r.html(""),t.each(["bg","hover","rating","outline","cover"],function(){r.append(' <div class="raterater-layer raterater-'+this+'-layer"></div>')});for(var v=0;v<l.numStars;v++)r.children(".raterater-bg-layer").first().append('<i class="fa fa-star"></i>'),r.children(".raterater-outline-layer").first().append('<i class="fa fa-star-o"></i>'),r.children(".raterater-hover-layer").first().append('<i class="fa fa-star"></i>'),r.children(".raterater-rating-layer").first().append('<i class="fa fa-star"></i>');l.isStatic||(r.find(".raterater-cover-layer").bind("touchmove touchend",u),r.find(".raterater-cover-layer").mousemove(o),r.find(".raterater-cover-layer").mouseleave(d),r.find(".raterater-cover-layer").mouseup(i))})}function e(){m.each(function(){var a;a=l.mode==p?t(this).parent().find('.raterater-input[data-id="'+c(this)+'"]'):t(this);var r=(c(a),l.width+"px"),e=Math.floor(l.starWidth/l.starAspect)+"px";a.css("width",r).css("height",e),a.find(".raterater-layer").each(function(){t(this).css("width",r).css("height",e)});for(var i=0;i<l.numStars;i++)t.each(["bg","hover","rating","outline"],function(){a.children(".raterater-"+this+"-layer").first().children("i").eq(i).css("left",i*(l.starWidth+l.spaceWidth)+"px").css("font-size",Math.floor(l.starWidth/l.starAspect)+"px")});var n=parseFloat(a.attr("data-rating")),o=Math.floor(n),d=n-o;s(a.find(".raterater-rating-layer").first(),o,d)})}function i(r){var e=t(r.target).parent(),i=c(e),n=f[i].whole_stars_hover+f[i].partial_star_hover;if(n=Math.round(100*n)/100,f[i].state="rated",f[i].stars=n,e.find(".raterater-hover-layer").addClass("rated"),"input"!=l.mode&&(void 0!==l.submitFunction&&"function"==typeof l.submitFunction||void 0!==window[l.submitFunction]&&"function"==typeof window[l.submitFunction])?void 0!==l.submitFunction&&"function"==typeof l.submitFunction?l.submitFunction(i,n):window[l.submitFunction](i,n):n>4.5?a(i,5):a(i,n),"rated"===f[i].state){var o=parseFloat(f[i].stars),d=Math.floor(o),u=o-d;return void s(e.find(".raterater-rating-layer").first(),d,u)}}function n(a,r,e){var i=t(e.target).parent(),n=i.data("star-width"),s=i.data("space-width"),o=Math.floor(a/(n+s)),d=a-o*(n+s);if(d>n&&(d=n),d/=n,l.step!==!1){var c=1/l.step;d=Math.round(d*c)/c}f[r].whole_stars_hover=o,f[r].partial_star_hover=d}function s(t,a,r){for(var e=(c(t.parent()),0);e<a;e++)t.find("i").eq(e).css("width",l.starWidth+"px");t.find("i").eq(a).css("width",l.starWidth*r+"px");for(var e=a+1;e<l.numStars;e++)t.find("i").eq(e).css("width","0px")}function o(a){var r=c(t(a.target).parent()),e=a.offsetX;void 0===e&&(e=a.pageX-t(a.target).offset().left),f[r].stars=n(e,r,a);var i=t(a.target).parent().children(".raterater-hover-layer").first();s(i,f[r].whole_stars_hover,f[r].partial_star_hover)}function d(a){var r=t(a.target).parent(),e=c(r);f[e].state="inactive"}function c(a){return t(a).attr("data-id")}function u(t){var a=t.originalEvent.changedTouches,r=a[0],e="";switch(t.type){case"touchmove":e="mousemove";break;case"touchend":e="mouseup";break;default:return}var i=document.createEvent("MouseEvent");i.initMouseEvent(e,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(i)}var h,f={},l={},p="input",v="callback",m=null,w=0;t.fn.raterater=function(a){if(t.fn.raterater.defaults={submitFunction:"",allowChange:!1,starWidth:20,spaceWidth:5,numStars:5,isStatic:!1,mode:v,step:!1},l=t.extend({},t.fn.raterater.defaults,a),l.width=l.numStars*(l.starWidth+l.spaceWidth),l.starAspect=.9226,l.step!==!1&&(l.step=parseFloat(l.step),l.step<=0||l.step>1))throw"Error: step must be between 0 and 1";return m=this,r(l),e(),this}}(jQuery);
//# sourceMappingURL=raterater.jquery.js.map
